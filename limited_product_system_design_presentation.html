<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œì •íŒ ìƒí’ˆ ì£¼ë¬¸ ì²˜ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .overview {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .process-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .flow-step {
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            flex: 1;
            margin: 10px;
            min-width: 250px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        
        .flow-step:hover {
            transform: translateY(-5px);
        }
        
        .flow-step.t1 { background: linear-gradient(45deg, #FF6B6B, #ee5a52); }
        .flow-step.t2 { background: linear-gradient(45deg, #4ECDC4, #44d4c8); }
        .flow-step.t3 { background: linear-gradient(45deg, #45B7D1, #4295c4); }
        
        .flow-step h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .flow-step::after {
            content: "â†’";
            position: absolute;
            right: -25px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: #666;
        }
        
        .flow-step:last-child::after {
            display: none;
        }
        
        .transaction-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-left: 6px solid;
        }
        
        .transaction-card.t1 { border-left-color: #FF6B6B; }
        .transaction-card.t2 { border-left-color: #4ECDC4; }
        .transaction-card.t3 { border-left-color: #45B7D1; }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-right: 20px;
        }
        
        .t1 .card-icon { background: #FF6B6B; }
        .t2 .card-icon { background: #4ECDC4; }
        .t3 .card-icon { background: #45B7D1; }
        
        .card-title {
            flex: 1;
        }
        
        .card-title h2 {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .goal {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }
        
        .scenario {
            background: #fff3cd;
            border: 1px solid #ffecb5;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .steps {
            display: grid;
            gap: 20px;
        }
        
        .step {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #007bff;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            position: relative;
        }
        
        .step:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .step-number {
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .step-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }
        
        .what-section {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .why-section {
            background: #fff3e0;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .how-section {
            background: #e8f5e8;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .analogy-section {
            background: #fce4ec;
            padding: 12px;
            border-radius: 8px;
            font-style: italic;
        }
        
        .section-label {
            font-weight: bold;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Fira Code', 'Monaco', 'Consolas', 'Courier New', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            overflow-x: auto;
            margin: 10px 0;
            white-space: pre-wrap;
            word-wrap: break-word;
            tab-size: 2;
            position: relative;
            z-index: 1;
        }
        
        .code-block .comment {
            color: #68d391;
            font-style: italic;
        }
        
        .code-block .keyword {
            color: #63b3ed;
            font-weight: bold;
        }
        
        .code-block .string {
            color: #fbb6ce;
        }
        
        .code-block .number {
            color: #f6ad55;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffecb5;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .summary-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            .process-flow {
                flex-direction: column;
            }
            
            .flow-step::after {
                content: "â†“";
                right: 50%;
                top: auto;
                bottom: -25px;
                transform: translateX(50%);
            }
            
            .flow-step:last-child::after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›’ í•œì •íŒ ìƒí’ˆ ì£¼ë¬¸ ì²˜ë¦¬ ì‹œìŠ¤í…œ</h1>
            <div class="subtitle">3ë‹¨ê³„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ë™ì‹œ ì£¼ë¬¸ ì²˜ë¦¬</div>
        </div>

        <div class="overview">
            <h2>ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”</h2>
            <p>í•œì •íŒ ìŠ¤ë‹ˆì»¤ì¦ˆ 100ì¼¤ë ˆë¥¼ ì˜¨ë¼ì¸ìœ¼ë¡œ íŒë§¤í•  ë•Œ, ìˆ˜ë§Œ ëª…ì´ ë™ì‹œì— êµ¬ë§¤ ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìƒí™©ì„ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.</p>
            
            <div class="process-flow">
                <div class="flow-step t1">
                    <h3>ğŸ›’ T1: ì˜ˆì•½í•˜ê¸°</h3>
                    <p>5ë¶„ê°„ ì°œí•˜ê¸°</p>
                </div>
                <div class="flow-step t2">
                    <h3>ğŸ’³ T2: ê²°ì œí•˜ê¸°</h3>
                    <p>ì§„ì§œ êµ¬ë§¤</p>
                </div>
                <div class="flow-step t3">
                    <h3>ğŸ§¹ T3: ì •ë¦¬í•˜ê¸°</h3>
                    <p>ì•ˆ ì‚° ê²ƒ ì¹˜ìš°ê¸°</p>
                </div>
            </div>

            <div class="success">
                <strong>ğŸ¯ í•µì‹¬ í•´ê²° ê³¼ì œ:</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>ë™ì‹œì„± ë¬¸ì œ:</strong> ìˆ˜ì²œ ëª…ì´ ë™ì‹œì— ê°™ì€ ìƒí’ˆ ì£¼ë¬¸ ì‹œ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ ë°©ì§€</li>
                    <li><strong>ì¬ê³  ì •í™•ì„±:</strong> ì ˆëŒ€ë¡œ ìŒìˆ˜ ì¬ê³ ë‚˜ ì´ˆê³¼ì£¼ë¬¸ ë°œìƒ ë°©ì§€</li>
                    <li><strong>ë©±ë“±ì„±:</strong> ë„¤íŠ¸ì›Œí¬ ì¬ì‹œë„, ë”ë¸”í´ë¦­, PG ì›¹í›… ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€</li>
                    <li><strong>ì„±ëŠ¥ê³¼ ë³µêµ¬:</strong> DB í•«ìŠ¤íŒŸ ìµœì†Œí™”ì™€ ì„œë²„ í¬ë˜ì‹œ ì‹œ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€</li>
                </ul>
            </div>
        </div>

        <!-- í•µì‹¬ í…Œì´ë¸” êµ¬ì¡° -->
        <div class="overview">
            <h2>ğŸ—ƒï¸ í•µì‹¬ í…Œì´ë¸” êµ¬ì¡°</h2>
            <p>í•œì •íŒ ìƒí’ˆ ì£¼ë¬¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ 6ê°œ í•µì‹¬ í…Œì´ë¸”ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.</p>

            <div class="steps">
                <div class="step" style="border-left-color: #FF6B6B;">
                    <div class="step-header">
                        <div class="step-number" style="background: #FF6B6B;">1</div>
                        <div class="step-title">ë©±ë“±ì„± í…Œì´ë¸” (idempotency)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>ê°™ì€ ìš”ì²­(ì‚¬ìš©ì, í‚¤)ì„ í•œ ë²ˆë§Œ ì²˜ë¦¬í•˜ë„ë¡ ë³´ì¥</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE idempotency (
  user_id       BIGINT       NOT NULL,
  idem_key      CHAR(36)     NOT NULL,         -- í´ë¼ì´ì–¸íŠ¸ê°€ ì¤€ UUID ë“±
  request_hash  BINARY(32)   NOT NULL,         -- method+path+body í•´ì‹œ(SHA-256)
  status        ENUM('IN_PROGRESS','SUCCEEDED','FAILED') NOT NULL,
  response_json JSON         NULL,             -- ì„±ê³µ ì‹œ ì‘ë‹µ ìŠ¤ëƒ…ìƒ·
  created_at    DATETIME     NOT NULL DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY uq_user_key (user_id, idem_key)
) ENGINE=InnoDB;</div>
                    </div>
                </div>

                <div class="step" style="border-left-color: #4ECDC4;">
                    <div class="step-header">
                        <div class="step-number" style="background: #4ECDC4;">2</div>
                        <div class="step-title">ë™ì‹œì¤‘ë³µ ë°©ì§€ í…Œì´ë¸” (user_active_hold)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>1ì¸ ë™ì‹œì¤‘ë³µ ì˜ˆì•½ ë°©ì§€ë¥¼ ìœ„í•œ ê°€ë²¼ìš´ ê¹ƒë°œ í…Œì´ë¸”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE user_active_hold (
  sale_id    BIGINT     NOT NULL,
  user_id    BIGINT     NOT NULL,
  sku_id     BIGINT     NOT NULL,
  hold_id    BIGINT     NULL,      -- ì˜ˆì•½ ìƒì„± í›„ ì—°ê²°
  expire_at  DATETIME   NULL,
  PRIMARY KEY (sale_id, user_id)
) ENGINE=InnoDB;</div>
                    </div>
                </div>

                <div class="step" style="border-left-color: #45B7D1;">
                    <div class="step-header">
                        <div class="step-number" style="background: #45B7D1;">3</div>
                        <div class="step-title">ì¬ê³  ì¹´ìš´í„° í…Œì´ë¸” (inventory_counter)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>í˜„ì¬ ê°€ìš© ì¬ê³  - ì¡°ê±´ë¶€ ë‹¨ì¼ UPDATE ëŒ€ìƒ (ì „ê´‘íŒ)</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE inventory_counter (
  sku_id     BIGINT   NOT NULL,
  available  INT      NOT NULL CHECK (available >= 0),
  PRIMARY KEY (sku_id)
) ENGINE=InnoDB;</div>
                    </div>
                </div>

                <div class="step" style="border-left-color: #FFA726;">
                    <div class="step-header">
                        <div class="step-number" style="background: #FFA726;">4</div>
                        <div class="step-title">ì˜ˆì•½ í…Œì´ë¸” (reservation_hold)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>ê²°ì œ ì „ ì„ì‹œ ì ìœ  + TTL ê´€ë¦¬</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE reservation_hold (
  hold_id     BIGINT   NOT NULL,
  sale_id     BIGINT   NOT NULL,
  sku_id      BIGINT   NOT NULL,
  user_id     BIGINT   NOT NULL,
  qty         INT      NOT NULL,
  status      ENUM('HOLD','COMMITTED','EXPIRED','CANCELLED') NOT NULL,
  expire_at   DATETIME NOT NULL,
  created_at  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (hold_id),
  KEY k_expire_at (expire_at)
) ENGINE=InnoDB;</div>
                    </div>
                </div>

                <div class="step" style="border-left-color: #AB47BC;">
                    <div class="step-header">
                        <div class="step-number" style="background: #AB47BC;">5</div>
                        <div class="step-title">ì¬ê³  ì›ì¥ í…Œì´ë¸” (inventory_ledger)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>ì¬ê³  ë³€í™” íˆìŠ¤í† ë¦¬ - ë¶ˆë³€ ì›ì¥ (INSERT ì „ìš©)</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE inventory_ledger (
  ledger_id    BIGINT    NOT NULL AUTO_INCREMENT,
  sku_id       BIGINT    NOT NULL,
  event_type   ENUM('RESERVE_DEBIT','EXPIRE_CREDIT','CANCEL_CREDIT','ADJUSTMENT') NOT NULL,
  qty_delta    INT       NOT NULL,     -- ì°¨ê°ì€ ìŒìˆ˜(-), ë³µì›ì€ ì–‘ìˆ˜(+)
  hold_id      BIGINT    NULL,
  reason       VARCHAR(100) NOT NULL,  -- 'reserve','expire','cancel' ë“±
  actor        VARCHAR(50)  NOT NULL,  -- 'system','admin:uid=...' ë“±
  created_at   DATETIME   NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (ledger_id),
  UNIQUE KEY uq_reserve_once (event_type, hold_id)  -- ê°™ì€ holdì— ê°™ì€ íƒ€ì… 1íšŒë§Œ
) ENGINE=InnoDB;</div>
                    </div>
                </div>

                <div class="step" style="border-left-color: #66BB6A;">
                    <div class="step-header">
                        <div class="step-number" style="background: #66BB6A;">6</div>
                        <div class="step-title">ì´ë²¤íŠ¸ ì•„ì›ƒë°•ìŠ¤ í…Œì´ë¸” (event_outbox)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ¯ ì—­í• </div>
                        <p>ì™¸ë¶€ ì „íŒŒìš© ì´ë²¤íŠ¸ ëŒ€ê¸°ì—´ (ì»¤ë°‹ê³¼ ì›ìì ìœ¼ë¡œ ê¸°ë¡)</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">ğŸ”‘ í•µì‹¬ í•„ë“œ</div>
                        <div class="code-block">CREATE TABLE event_outbox (
  event_id        BIGINT      NOT NULL AUTO_INCREMENT,
  aggregate_type  VARCHAR(50) NOT NULL,   -- e.g. 'InventoryReservation'
  aggregate_id    BIGINT      NOT NULL,   -- e.g. hold_id
  event_type      VARCHAR(50) NOT NULL,   -- e.g. 'ReservationCreated'
  payload         JSON        NOT NULL,   -- ì „ì†¡í•  ë‚´ìš©(í•„ìˆ˜ í•„ë“œë§Œ)
  status          ENUM('PENDING','IN_PROGRESS','SENT','FAILED') NOT NULL DEFAULT 'PENDING',
  created_at      DATETIME    NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (event_id),
  UNIQUE KEY uq_aggregate_event (aggregate_type, aggregate_id, event_type)
) ENGINE=InnoDB;</div>
                    </div>
                </div>
            </div>

            <div class="warning">
                <h3>ğŸ”— í…Œì´ë¸” ê°„ ê´€ê³„</h3>
                <ul>
                    <li><strong>ì „ê´‘íŒ & ì˜ìˆ˜ì¦:</strong> inventory_counterì™€ inventory_ledgerê°€ ê°™ì€ íŠ¸ëœì­ì…˜ì—ì„œ í•¨ê»˜ ì›€ì§ì„</li>
                    <li><strong>ì˜ˆì•½ ìƒëª…ì£¼ê¸°:</strong> user_active_hold â†’ reservation_hold â†’ orders (í™•ì • ì‹œ)</li>
                    <li><strong>ë©±ë“±ì„± ë³´ì¥:</strong> ëª¨ë“  ìš”ì²­ì´ idempotency í…Œì´ë¸”ì„ ê±°ì³ ì¤‘ë³µ ë°©ì§€</li>
                    <li><strong>ì´ë²¤íŠ¸ ì „íŒŒ:</strong> ëª¨ë“  ìƒíƒœ ë³€í™”ê°€ event_outboxë¥¼ í†µí•´ ì™¸ë¶€ ì‹œìŠ¤í…œì— ì•Œë¦¼</li>
                </ul>
            </div>

        <!-- T1 íŠ¸ëœì­ì…˜ -->
        <div class="transaction-card t1">
            <div class="card-header">
                <div class="card-icon">ğŸ›’</div>
                <div class="card-title">
                    <h2>T1 íŠ¸ëœì­ì…˜: ì˜ˆì•½í•˜ê¸°</h2>
                    <p>ì‚¬ìš©ìê°€ "êµ¬ë§¤" ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì¬ê³ ë¥¼ ì•ˆì „í•˜ê²Œ ì˜ˆì•½</p>
                </div>
            </div>

            <div class="goal">
                <div class="section-label">ğŸ¯ ëª©í‘œ</div>
                <p>ì‚¬ìš©ìê°€ "êµ¬ë§¤" ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ì¬ê³ ë¥¼ ì•ˆì „í•˜ê²Œ ì˜ˆì•½í•˜ê¸°</p>
            </div>

            <div class="steps">
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">ì¤‘ë³µ ìš”ì²­ ë°©ì§€ (ë©±ë“±ì„± ì²´í¬)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ê°™ì€ ì‚¬ëŒì´ êµ¬ë§¤ ë²„íŠ¼ì„ ì—¬ëŸ¬ ë²ˆ ëˆŒëŸ¬ë„ í•œ ë²ˆë§Œ ì²˜ë¦¬ë˜ê²Œ í•©ë‹ˆë‹¤</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ì‚¬ìš©ìê°€ ë‹µë‹µí•´ì„œ êµ¬ë§¤ ë²„íŠ¼ì„ ì—°íƒ€í•  ìˆ˜ ìˆì–´ìš”<br>
                        â€¢ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ìš”ì²­ì´ ì—¬ëŸ¬ ë²ˆ ê°ˆ ìˆ˜ ìˆì–´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- "ì´ ìš”ì²­ì€ ë‚´ê°€ ì²˜ë¦¬ ì¤‘ì´ì•¼" ê¹ƒë°œ ê½‚ê¸°
INSERT INTO idempotency(user_id, idem_key, status) 
VALUES ('í™ê¸¸ë™', 'abc-123', 'IN_PROGRESS')
ON DUPLICATE KEY UPDATE idem_key = idem_key;

-- ìƒˆë¡œ ë“¤ì–´ê°”ë‚˜ í™•ì¸
IF ROW_COUNT() = 1 THEN
  -- ë‚´ê°€ ì²« ë²ˆì§¸ ìš”ì²­: ê³„ì† ì§„í–‰
ELSE 
  -- ì´ë¯¸ ì²˜ë¦¬ ì¤‘: ê¸°ì¡´ ê²°ê³¼ ë°˜í™˜í•˜ê³  ì¢…ë£Œ
END IF;</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ì€í–‰ì—ì„œ ë²ˆí˜¸í‘œ ë½‘ê¸°. ê°™ì€ ë²ˆí˜¸í‘œëŠ” í•œ ë²ˆë§Œ ë½‘ì„ ìˆ˜ ìˆì–´ìš”.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">í•œ ì‚¬ëŒë‹¹ 1ê°œ ì œí•œ ì²´í¬</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ê°™ì€ ì‚¬ëŒì´ ì—¬ëŸ¬ ê°œ êµ¬ë§¤í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ í•œì •íŒì€ ë³´í†µ "1ì¸ 1ê°œ" ì œí•œì´ ìˆì–´ìš”<br>
                        â€¢ í•œ ì‚¬ëŒì´ ì—¬ëŸ¬ ë¸Œë¼ìš°ì €ë¡œ ë™ì‹œì— ì£¼ë¬¸í•  ìˆ˜ ìˆì–´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì´ë¯¸ ì˜ˆì•½í•œ ê²Œ ìˆëŠ”ì§€ í™•ì¸
INSERT INTO user_active_hold(sale_id, user_id, sku_id) 
VALUES (ì„¸ì¼ID, 'í™ê¸¸ë™', 'ìŠ¤ë‹ˆì»¤ì¦ˆID')
ON DUPLICATE KEY UPDATE sale_id = sale_id;

IF ROW_COUNT() = 0 THEN
  -- ì´ë¯¸ ì˜ˆì•½í–ˆìŒ: ê±°ì ˆ
  ROLLBACK;
END IF;</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ì½˜ì„œíŠ¸ í‹°ì¼“ ì˜ˆë§¤í•  ë•Œ "1ì¸ 4ë§¤ í•œì •" ì²´í¬í•˜ëŠ” ê²ƒê³¼ ê°™ì•„ìš”.</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">ì¬ê³  ì°¨ê° (â­ ê°€ì¥ ì¤‘ìš”!)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì „ì²´ ì¬ê³ ì—ì„œ ì£¼ë¬¸ ìˆ˜ëŸ‰ë§Œí¼ ë¹¼ê¸°</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ ì¤‘ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ì—¬ê¸°ì„œ ì‹¤ìˆ˜í•˜ë©´ 101ê°œê°€ íŒ”ë¦´ ìˆ˜ ìˆì–´ìš”!<br>
                        â€¢ ë™ì‹œì— 1000ëª…ì´ ë§ˆì§€ë§‰ 1ê°œë¥¼ ë…¸ë¦´ ë•Œë„ ì•ˆì „í•´ì•¼ í•´ìš”</p>
                    </div>
                    
                    <div class="warning">
                        <strong>âŒ ì˜ëª»ëœ ë°©ë²• (ì ˆëŒ€ ì´ë ‡ê²Œ í•˜ë©´ ì•ˆ ë¨!):</strong>
                        <div class="code-block">-- ìœ„í—˜í•œ ë°©ì‹
SELECT available FROM inventory WHERE sku_id = 123;  -- 100ê°œ í™•ì¸
-- ì ê¹ì˜ í‹ˆ...
UPDATE inventory SET available = available - 1;      -- ì°¨ê°</div>
                        â†’ ë‘ ëª…ì´ ë™ì‹œì— í•˜ë©´ ë‘˜ ë‹¤ 100ê°œë¥¼ ë³´ê³  ë‘˜ ë‹¤ ì°¨ê°í•´ì„œ 98ê°œê°€ ë¨!
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”? (âœ… ì˜¬ë°”ë¥¸ ë°©ë²•)</div>
                        <div class="code-block">-- ì•ˆì „í•œ ë°©ì‹ (í•œ ë²ˆì— í™•ì¸+ì°¨ê°)
UPDATE inventory_counter 
SET available = available - 1 
WHERE sku_id = 123 AND available >= 1;

-- ì‹¤ì œë¡œ ì°¨ê°ëëŠ”ì§€ í™•ì¸
IF ROW_COUNT() = 1 THEN
  -- ì„±ê³µ: ì¬ê³  1ê°œ ì°¨ê°ë¨
ELSE 
  -- ì‹¤íŒ¨: ì¬ê³  ë¶€ì¡±, ì£¼ë¬¸ ê±°ì ˆ
  ROLLBACK;
END IF;</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p><strong>âŒ ë‚˜ìœ ì˜ˆ:</strong> ëƒ‰ì¥ê³  í™•ì¸ â†’ ìš°ìœ  ìˆë„¤ â†’ ë§ˆíŠ¸ ê°€ì„œ ìš°ìœ  ì‚¬ê¸° (ê·¸ ì‚¬ì´ ê°€ì¡±ì´ ìš°ìœ  ë‹¤ ë§ˆì‹¤ ìˆ˜ ìˆìŒ)<br>
                        <strong>âœ… ì¢‹ì€ ì˜ˆ:</strong> ëƒ‰ì¥ê³ ì—ì„œ ìš°ìœ ë¥¼ ì§ì ‘ êº¼ë‚´ê¸° (ì—†ìœ¼ë©´ êº¼ë‚¼ ìˆ˜ ì—†ìŒ)</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">ì˜ˆì•½ ê¸°ë¡ ìƒì„±</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>"í™ê¸¸ë™ë‹˜ì´ ìŠ¤ë‹ˆì»¤ì¦ˆ 1ì¼¤ë ˆë¥¼ 5ë¶„ê°„ ì˜ˆì•½í–ˆìŒ" ê¸°ë¡í•˜ê¸°</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ê²°ì œí•  ë•Œ "ë‚´ê°€ ì§„ì§œ ì˜ˆì•½í•œ ê²Œ ë§ë‚˜?" í™•ì¸í•˜ë ¤ê³ <br>
                        â€¢ 5ë¶„ í›„ì— ìë™ìœ¼ë¡œ ì·¨ì†Œí•˜ë ¤ê³ </p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">INSERT INTO reservation_hold(
  hold_id, user_id, sku_id, qty, status, expire_at
) VALUES (
  'hold_12345', 'í™ê¸¸ë™', 'ìŠ¤ë‹ˆì»¤ì¦ˆID', 1, 'HOLD', 
  NOW() + INTERVAL 5 MINUTE
);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ë ˆìŠ¤í† ë‘ì—ì„œ í…Œì´ë¸” ì˜ˆì•½í•  ë•Œ "í™ê¸¸ë™ë‹˜, 4ì¸ì„, 7ì‹œ, 10ë¶„ í›„ ì·¨ì†Œ" ì´ë ‡ê²Œ ì ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">5</div>
                        <div class="step-title">ê°ì‚¬ ê¸°ë¡ (ì˜ìˆ˜ì¦)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>"ì–¸ì œ, ëˆ„ê°€, ë¬´ì—‡ì„, ì™œ" ì¬ê³ ê°€ ë³€í–ˆëŠ”ì§€ ì˜êµ¬ ê¸°ë¡</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ë‚˜ì¤‘ì— ë¬¸ì œ ìƒê²¼ì„ ë•Œ ì¶”ì í•˜ë ¤ê³ <br>
                        â€¢ ì¬ê³  ìˆ«ìê°€ ì•ˆ ë§ì„ ë•Œ ì›ì¸ ì°¾ìœ¼ë ¤ê³ </p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">INSERT INTO inventory_ledger(
  sku_id, event_type, qty_delta, hold_id, reason, created_at
) VALUES (
  'ìŠ¤ë‹ˆì»¤ì¦ˆID', 'RESERVE_DEBIT', -1, 'hold_12345', 
  'ì˜ˆì•½ìœ¼ë¡œ ì¸í•œ ì°¨ê°', NOW()
);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ê°€ê³„ë¶€ì— "2024-01-15, ìŠ¤ë‹ˆì»¤ì¦ˆ ì˜ˆì•½, -1ê°œ, í™ê¸¸ë™" ì´ë ‡ê²Œ ì ì–´ë‘ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">6</div>
                        <div class="step-title">ì´ë²¤íŠ¸ ë°œì†¡ ì¤€ë¹„ (ì•„ì›ƒë°•ìŠ¤)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ë‹¤ë¥¸ ì‹œìŠ¤í…œë“¤ì—ê²Œ "ì˜ˆì•½ ë°œìƒí–ˆì–´ìš”!" ì•Œë¦¼ ì¤€ë¹„</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œì— ì•Œë ¤ì•¼ í•´ìš”<br>
                        â€¢ ë§ˆì¼€íŒ… ì‹œìŠ¤í…œì—ì„œ "ë‚¨ì€ ì¬ê³  99ê°œ" ì—…ë°ì´íŠ¸í•´ì•¼ í•´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">INSERT INTO event_outbox(
  event_type, payload, created_at
) VALUES (
  'ReservationCreated', 
  '{"user_id":"í™ê¸¸ë™", "sku_id":"ìŠ¤ë‹ˆì»¤ì¦ˆID", "qty":1}',
  NOW()
);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ìš°ì²´í†µì— í¸ì§€ ë„£ì–´ë‘ê¸°. ìš°ì²´ë¶€(ì´ë²¤íŠ¸ ë°œì†¡ ì„œë¹„ìŠ¤)ê°€ ë‚˜ì¤‘ì— ë°°ë‹¬í•´ì¤Œ</p>
                    </div>
                </div>
            </div>

            <div class="success">
                <strong>ğŸ¯ T1 ì „ì²´ íë¦„ ì •ë¦¬:</strong><br>
                ì´ 6ë‹¨ê³„ê°€ <span class="highlight">ëª¨ë‘ ì„±ê³µí•˜ê±°ë‚˜ ëª¨ë‘ ì‹¤íŒ¨</span>í•©ë‹ˆë‹¤. ì¤‘ê°„ì— í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì „ë¶€ ì·¨ì†Œë¼ìš”!
                <div class="code-block">START TRANSACTION;  -- íŠ¸ëœì­ì…˜ ì‹œì‘

-- 1) ì¤‘ë³µ ë°©ì§€ â†’ 2) 1ì¸ 1ê°œ ì²´í¬ â†’ 3) ì¬ê³  ì°¨ê° (í•µì‹¬!)
-- 4) ì˜ˆì•½ ìƒì„± â†’ 5) ê°ì‚¬ ê¸°ë¡ â†’ 6) ì´ë²¤íŠ¸ ì¤€ë¹„

COMMIT;  -- ëª¨ë“  ê²ƒì„ í•œ ë²ˆì— í™•ì •

RETURN { 
  "hold_id": "hold_12345", 
  "expire_at": "2024-01-15 14:05:00" 
};</div>
            </div>
        </div>

        <!-- T2 íŠ¸ëœì­ì…˜ -->
        <div class="transaction-card t2">
            <div class="card-header">
                <div class="card-icon">ğŸ’³</div>
                <div class="card-title">
                    <h2>T2 íŠ¸ëœì­ì…˜: ê²°ì œí•˜ê¸°</h2>
                    <p>ê²°ì œê°€ ì™„ë£Œë˜ë©´ ì˜ˆì•½ì„ ì§„ì§œ ì£¼ë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°</p>
                </div>
            </div>

            <div class="goal">
                <div class="section-label">ğŸ¯ ëª©í‘œ</div>
                <p>ê²°ì œê°€ ì™„ë£Œë˜ë©´ ì˜ˆì•½ì„ ì§„ì§œ ì£¼ë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°</p>
            </div>

            <div class="scenario">
                <strong>ğŸ¬ ì‹œë‚˜ë¦¬ì˜¤:</strong><br>
                1. ì‚¬ìš©ìê°€ T1ìœ¼ë¡œ ìŠ¤ë‹ˆì»¤ì¦ˆë¥¼ ì˜ˆì•½í•¨<br>
                2. ê²°ì œ í˜ì´ì§€ì—ì„œ ì¹´ë“œ ì •ë³´ ì…ë ¥<br>
                3. ì™¸ë¶€ ê²°ì œì‚¬(PG)ì—ì„œ ê²°ì œ ì„±ê³µ<br>
                4. ê²°ì œì‚¬ê°€ ìš°ë¦¬ ì„œë²„ì— "ê²°ì œ ëì–´ìš”!" ì•Œë¦¼ (ì›¹í›…)<br>
                5. <strong>T2 íŠ¸ëœì­ì…˜ ì‹œì‘!</strong>
            </div>

            <div class="steps">
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">ê²°ì œ ì¤‘ë³µ ë°©ì§€ (ë©±ë“±ì„± ì²´í¬)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ê°™ì€ ê²°ì œ ê±´ì´ ì—¬ëŸ¬ ë²ˆ ë“¤ì–´ì™€ë„ í•œ ë²ˆë§Œ ì²˜ë¦¬</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ í•„ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ê²°ì œì‚¬ì—ì„œ ì›¹í›…ì„ ì—¬ëŸ¬ ë²ˆ ë³´ë‚¼ ìˆ˜ ìˆì–´ìš”<br>
                        â€¢ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ì¬ì‹œë„ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆì–´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì´ë¯¸ ì²˜ë¦¬í•œ ê²°ì œì¸ì§€ í™•ì¸
SELECT response_json 
FROM idempotency 
WHERE user_id = 'í™ê¸¸ë™' AND idem_key = 'payment_abc123';

IF FOUND THEN
  -- ì´ë¯¸ ì²˜ë¦¬ë¨: ê¸°ì¡´ ê²°ê³¼ ë°˜í™˜í•˜ê³  ì¢…ë£Œ
  RETURN stored_response;
END IF;

-- ìƒˆë¡œìš´ ê²°ì œ: "ì²˜ë¦¬ ì¤‘" í‘œì‹œ
INSERT INTO idempotency(user_id, idem_key, status) 
VALUES ('í™ê¸¸ë™', 'payment_abc123', 'IN_PROGRESS');</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ì€í–‰ì—ì„œ ê°™ì€ ìˆ˜í‘œë¥¼ ë‘ ë²ˆ í˜„ê¸ˆí™”í•˜ë ¤ê³  í•´ë„ í•œ ë²ˆë§Œ ë¨</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">ì˜ˆì•½ ìœ íš¨ì„± í™•ì¸ + ì ê¸ˆ (â­ ê°€ì¥ ì¤‘ìš”!)</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>â€¢ ë‚´ê°€ ì˜ˆì•½í•œ ê²Œ ì•„ì§ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸<br>
                        â€¢ ë‹¤ë¥¸ ì‚¬ëŒì´ ë™ì‹œì— ê±´ë“œë¦¬ì§€ ëª»í•˜ê²Œ ì ê¸ˆ</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ ì´ ë‹¨ê³„ê°€ ì¤‘ìš”í•œê°€ìš”?</div>
                        <p>â€¢ ì˜ˆì•½ì´ ë§Œë£Œëì„ ìˆ˜ë„ ìˆì–´ìš” (5ë¶„ ì§€ë‚¨)<br>
                        â€¢ ê°™ì€ ì˜ˆì•½ì— ëŒ€í•´ ì—¬ëŸ¬ ê²°ì œê°€ ë™ì‹œì— ì˜¬ ìˆ˜ë„ ìˆì–´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì˜ˆì•½ ì •ë³´ë¥¼ ë½ ê±¸ê³  ê°€ì ¸ì˜¤ê¸°
SELECT user_id, sku_id, qty, status, expire_at
FROM reservation_hold 
WHERE hold_id = 'hold_12345' 
FOR UPDATE;  -- ğŸ”’ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì´ ì´ í–‰ì„ ëª» ê±´ë“œë¦¬ê²Œ ë½!

-- ìœ íš¨ì„± ê²€ì‚¬
IF status != 'HOLD' THEN
  ROLLBACK; -- ì´ë¯¸ í™•ì •ë˜ê±°ë‚˜ ë§Œë£Œë¨
END IF;

IF expire_at <= NOW() THEN
  ROLLBACK; -- ì‹œê°„ ë§Œë£Œ
END IF;

IF user_id != 'í™ê¸¸ë™' THEN
  ROLLBACK; -- ë‹¤ë¥¸ ì‚¬ëŒ ì˜ˆì•½
END IF;</div>
                    </div>
                    
                    <div class="warning">
                        <strong>FOR UPDATEê°€ ì¤‘ìš”í•œ ì´ìœ :</strong>
                        <div class="code-block">ì‹œê°„ ìˆœì„œ:
ì„œë²„ A: ì˜ˆì•½ í™•ì¸ (HOLD ìƒíƒœ) â†’ ì£¼ë¬¸ ìƒì„± â†’ ìƒíƒœ ë³€ê²½ â†’ ì»¤ë°‹
ì„œë²„ B: ì˜ˆì•½ í™•ì¸ (ëŒ€ê¸°...) â†’ A ì»¤ë°‹ í›„ â†’ ì´ë¯¸ COMMITTED í™•ì¸ â†’ ì¤‘ë‹¨

FOR UPDATE ì—†ìœ¼ë©´:
ì„œë²„ A: ì˜ˆì•½ í™•ì¸ (HOLD ìƒíƒœ) â†’ ì£¼ë¬¸ ìƒì„± â†’ ìƒíƒœ ë³€ê²½ â†’ ì»¤ë°‹  
ì„œë²„ B: ì˜ˆì•½ í™•ì¸ (HOLD ìƒíƒœ) â†’ ì£¼ë¬¸ ìƒì„± â†’ ìƒíƒœ ë³€ê²½ â†’ ì»¤ë°‹
ê²°ê³¼: ì£¼ë¬¸ 2ê°œ ìƒì„±! ğŸ’¥</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ë„ì„œê´€ì—ì„œ ì±… ëŒ€ì¶œí•  ë•Œ, ì‚¬ì„œê°€ ì±…ì„ ë“¤ê³  ìˆëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‚¬ëŒì´ ëª» ê°€ì ¸ê°€ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">ì£¼ë¬¸ ìƒì„±</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì§„ì§œ ì£¼ë¬¸ ë ˆì½”ë“œ ë§Œë“¤ê¸°</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì£¼ë¬¸ ë²ˆí˜¸ ìƒì„±
SET @order_id = generate_order_id();

-- ì£¼ë¬¸ ìƒì„±
INSERT INTO orders(
  order_id, user_id, status, total_amount, hold_id, created_at
) VALUES (
  @order_id, 'í™ê¸¸ë™', 'CONFIRMED', 150000, 'hold_12345', NOW()
);

-- ì£¼ë¬¸ ìƒí’ˆ ì •ë³´
INSERT INTO order_items(
  order_id, sku_id, qty, price
) VALUES (
  @order_id, 'ìŠ¤ë‹ˆì»¤ì¦ˆID', 1, 150000
);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ë ˆìŠ¤í† ë‘ì—ì„œ ì£¼ë¬¸í‘œ ì‘ì„±í•˜ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">ì˜ˆì•½ í™•ì •</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì˜ˆì•½ ìƒíƒœë¥¼ 'HOLD'ì—ì„œ 'COMMITTED'ë¡œ ë³€ê²½</p>
                    </div>
                    
                    <div class="why-section">
                        <div class="section-label">â“ ì™œ 3ë‹¨ê³„ì™€ 4ë‹¨ê³„ë¥¼ ê°™ì´ í•´ì•¼ í•˜ë‚˜ìš”?</div>
                        <p>â€¢ ì£¼ë¬¸ì€ ìƒì„±ëëŠ”ë° ì˜ˆì•½ì€ HOLD ìƒíƒœë¡œ ë‚¨ìœ¼ë©´ ì•ˆ ë˜ê±°ë“ ìš”<br>
                        â€¢ ë‘˜ ë‹¤ ì„±ê³µí•˜ê±°ë‚˜ ë‘˜ ë‹¤ ì‹¤íŒ¨í•´ì•¼ í•´ìš”</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì˜ˆì•½ í™•ì •
UPDATE reservation_hold 
SET status = 'COMMITTED', updated_at = NOW()
WHERE hold_id = 'hold_12345' AND status = 'HOLD';

-- 1ì¸ 1ê°œ ì œí•œ í•´ì œ (ë” ì´ìƒ ì˜ˆì•½ ì¤‘ì´ ì•„ë‹ˆë¯€ë¡œ)
DELETE FROM user_active_hold 
WHERE user_id = 'í™ê¸¸ë™' AND hold_id = 'hold_12345';</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ë„ì„œê´€ì—ì„œ ì˜ˆì•½ ë„ì„œë¥¼ ëŒ€ì¶œë¡œ ë°”ê¾¸ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">5</div>
                        <div class="step-title">ê¸°ë¡ ë° ì´ë²¤íŠ¸</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>â€¢ ì£¼ë¬¸ í™•ì • ê¸°ë¡ ë‚¨ê¸°ê¸°<br>
                        â€¢ ë‹¤ë¥¸ ì‹œìŠ¤í…œë“¤ì—ê²Œ ì•Œë¦¼ ì¤€ë¹„</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì£¼ë¬¸ ì›ì¥ ê¸°ë¡
INSERT INTO order_ledger(
  order_id, event_type, payload, created_at
) VALUES (
  @order_id, 'ORDER_CONFIRMED', 
  '{"hold_id":"hold_12345", "amount":150000}', NOW()
);

-- ë°°ì†¡/ì •ì‚° ì‹œìŠ¤í…œì— ì•Œë¦¼ ì¤€ë¹„
INSERT INTO event_outbox(
  event_type, payload, created_at
) VALUES (
  'OrderConfirmed',
  '{"order_id":"order_67890", "user_id":"í™ê¸¸ë™", "amount":150000}',
  NOW()
);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p><strong>ì£¼ë¬¸ ì›ì¥</strong> = ê°€ê²Œ ì¥ë¶€ì— "í™ê¸¸ë™ë‹˜ ìŠ¤ë‹ˆì»¤ì¦ˆ íŒë§¤" ê¸°ë¡<br>
                        <strong>ì´ë²¤íŠ¸</strong> = ë°°ì†¡íŒ€ì—ê²Œ "í™ê¸¸ë™ë‹˜ ì£¼ì†Œë¡œ ìŠ¤ë‹ˆì»¤ì¦ˆ ë³´ë‚´ì„¸ìš”" ë©”ëª¨</p>
                    </div>
                </div>
            </div>

            <div class="success">
                <strong>ğŸ¯ T2 ì „ì²´ íë¦„ ì •ë¦¬:</strong><br>
                ëª¨ë“  ë‹¨ê³„ê°€ ì„±ê³µí•´ì•¼ë§Œ order_idë¥¼ ì‘ë‹µí•©ë‹ˆë‹¤. <span class="highlight">FOR UPDATEë¡œ ë™ì‹œ í™•ì •ì„ ë°©ì§€</span>í•˜ëŠ” ê²ƒì´ í•µì‹¬!
                <div class="code-block">START TRANSACTION;

-- 1) ê²°ì œ ì¤‘ë³µ ì²´í¬ â†’ 2) ì˜ˆì•½ ìœ íš¨ì„± + ì ê¸ˆ (FOR UPDATE)
-- 3) ì£¼ë¬¸ ìƒì„± â†’ 4) ì˜ˆì•½ í™•ì • â†’ 5) ê¸°ë¡ ë° ì´ë²¤íŠ¸

COMMIT;

RETURN { 
  "order_id": "order_67890", 
  "status": "CONFIRMED" 
};</div>
            </div>
        </div>

        <!-- T3 íŠ¸ëœì­ì…˜ -->
        <div class="transaction-card t3">
            <div class="card-header">
                <div class="card-icon">ğŸ§¹</div>
                <div class="card-title">
                    <h2>T3 íŠ¸ëœì­ì…˜: ì •ë¦¬í•˜ê¸°</h2>
                    <p>ì‹œê°„ì´ ì§€ë‚˜ë„ ê²°ì œí•˜ì§€ ì•Šì€ ì˜ˆì•½ë“¤ì„ ì •ë¦¬í•˜ê³  ì¬ê³  ë³µì›í•˜ê¸°</p>
                </div>
            </div>

            <div class="goal">
                <div class="section-label">ğŸ¯ ëª©í‘œ</div>
                <p>ì‹œê°„ì´ ì§€ë‚˜ë„ ê²°ì œí•˜ì§€ ì•Šì€ ì˜ˆì•½ë“¤ì„ ì •ë¦¬í•˜ê³  ì¬ê³  ë³µì›í•˜ê¸°</p>
            </div>

            <div class="scenario">
                <strong>ğŸ¬ ì‹œë‚˜ë¦¬ì˜¤:</strong><br>
                1. í™ê¸¸ë™ë‹˜ì´ ì˜¤í›„ 2ì‹œì— ìŠ¤ë‹ˆì»¤ì¦ˆë¥¼ ì˜ˆì•½í•¨ (5ë¶„ ìœ íš¨)<br>
                2. ì˜¤í›„ 2ì‹œ 5ë¶„ì´ ì§€ë‚˜ë„ ê²°ì œ ì•ˆ í•¨<br>
                3. <strong>T3 íŠ¸ëœì­ì…˜ì´ ì´ ì˜ˆì•½ì„ ì •ë¦¬í•´ì•¼ í•¨</strong><br>
                4. ì¬ê³ ë¥¼ ë‹¤ì‹œ 99 â†’ 100ìœ¼ë¡œ ë³µì›<br>
                5. ë‹¤ë¥¸ ì‚¬ëŒì´ êµ¬ë§¤í•  ìˆ˜ ìˆê²Œ ë¨
            </div>

            <div class="success">
                <strong>ğŸ¤– ëˆ„ê°€ ì‹¤í–‰í•˜ë‚˜ìš”?</strong><br>
                â€¢ <strong>ë°±ê·¸ë¼ìš´ë“œ ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤</strong>ê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ (ì˜ˆ: 10ì´ˆë§ˆë‹¤)<br>
                â€¢ ì‚¬ìš©ìê°€ ì§ì ‘ í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ í•¨
            </div>

            <div class="steps">
                <div class="step">
                    <div class="step-header">
                        <div class="step-number">1</div>
                        <div class="step-title">ë§Œë£Œëœ ì˜ˆì•½ ì°¾ê¸°</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì‹œê°„ì´ ì§€ë‚¬ëŠ”ë° ì•„ì§ HOLD ìƒíƒœì¸ ì˜ˆì•½ë“¤ ì°¾ê¸°</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ë§Œë£Œëœ ì˜ˆì•½ë“¤ ì°¾ê¸° (ì¶©ëŒ ë°©ì§€!)
SELECT hold_id, sku_id, user_id, qty 
FROM reservation_hold 
WHERE status = 'HOLD' 
  AND expire_at <= NOW()  -- ë§Œë£Œ ì‹œê°„ ì§€ë‚¨
FOR UPDATE SKIP LOCKED    -- ğŸ”’ T2ê°€ ì²˜ë¦¬ ì¤‘ì¸ ê±´ì€ ê±´ë„ˆë›°ê¸°
LIMIT 1000;               -- í•œ ë²ˆì— ë„ˆë¬´ ë§ì´ ì²˜ë¦¬í•˜ì§€ ì•Šê¸°</div>
                    </div>
                    
                    <div class="warning">
                        <strong>SKIP LOCKEDê°€ ì¤‘ìš”í•œ ì´ìœ :</strong>
                        <div class="code-block">ìƒí™©: hold_12345ê°€ ë§Œë£Œ ì‹œê°„ì´ ì§€ë‚¬ì§€ë§Œ, T2ê°€ ì²˜ë¦¬ ì¤‘

T2 (ê²°ì œ ì²˜ë¦¬):  hold_12345ì— FOR UPDATE ë½ ê±¸ê³  ì²˜ë¦¬ ì¤‘...
T3 (ë§Œë£Œ ì²˜ë¦¬):  SKIP LOCKEDë¡œ hold_12345ëŠ” ê±´ë„ˆë›°ê³  ë‹¤ë¥¸ ê²ƒ ì²˜ë¦¬

ë§Œì•½ SKIP LOCKEDê°€ ì—†ë‹¤ë©´:
T3ì´ T2ê°€ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸° â†’ ì„±ëŠ¥ ì €í•˜</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ë„ì„œê´€ì—ì„œ ë°˜ë‚© ì—°ì²´ ë„ì„œë¥¼ ì •ë¦¬í•  ë•Œ, ëˆ„êµ°ê°€ ì½ê³  ìˆëŠ” ì±…ì€ ê±´ë„ˆë›°ëŠ” ê²ƒ</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">2</div>
                        <div class="step-title">ìƒíƒœ ë³€ê²½</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì°¾ì€ ì˜ˆì•½ë“¤ì˜ ìƒíƒœë¥¼ 'HOLD' â†’ 'EXPIRED'ë¡œ ë³€ê²½</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ì°¾ì€ ì˜ˆì•½ë“¤ì„ ë§Œë£Œ ìƒíƒœë¡œ ë³€ê²½
UPDATE reservation_hold 
SET status = 'EXPIRED', updated_at = NOW()
WHERE hold_id IN ('hold_12345', 'hold_12346', ...)
  AND status = 'HOLD';  -- í˜¹ì‹œ ëª°ë¼ ìƒíƒœ í•œ ë²ˆ ë” í™•ì¸</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ì˜ˆì•½í‘œì— "ì·¨ì†Œë¨" ë„ì¥ ì°ê¸°</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">3</div>
                        <div class="step-title">ì¬ê³  ë³µì›</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>ì˜ˆì•½ìœ¼ë¡œ ë¬¶ì—¬ìˆë˜ ì¬ê³ ë¥¼ ë‹¤ì‹œ íŒë§¤ ê°€ëŠ¥ ìƒíƒœë¡œ ëŒë ¤ë†“ê¸°</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- SKUë³„ë¡œ ë³µì›í•  ìˆ˜ëŸ‰ ê³„ì‚°
SELECT sku_id, SUM(qty) as total_qty
FROM reservation_hold 
WHERE hold_id IN ('hold_12345', 'hold_12346', ...)
GROUP BY sku_id;

-- ì¬ê³  ë³µì›
UPDATE inventory_counter 
SET available = available + 1  -- 1ê°œ ë³µì›
WHERE sku_id = 'ìŠ¤ë‹ˆì»¤ì¦ˆID';

UPDATE inventory_counter 
SET available = available + 2  -- 2ê°œ ë³µì›  
WHERE sku_id = 'ìš´ë™í™”ID';</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p>ì˜ˆì•½ ì·¨ì†Œëœ ìƒí’ˆì„ ë‹¤ì‹œ ì§„ì—´ëŒ€ì— ì˜¬ë ¤ë†“ê¸°</p>
                    </div>
                </div>

                <div class="step">
                    <div class="step-header">
                        <div class="step-number">4</div>
                        <div class="step-title">ê¸°ë¡ ë° ì´ë²¤íŠ¸</div>
                    </div>
                    
                    <div class="what-section">
                        <div class="section-label">ğŸ“ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?</div>
                        <p>â€¢ ë§Œë£Œ ì²˜ë¦¬í•œ ê²ƒì„ ì˜êµ¬ ê¸°ë¡<br>
                        â€¢ ë‹¤ë¥¸ ì‹œìŠ¤í…œë“¤ì—ê²Œ "ì¬ê³  ëŠ˜ì–´ë‚¬ì–´ìš”!" ì•Œë¦¼</p>
                    </div>
                    
                    <div class="how-section">
                        <div class="section-label">âš™ï¸ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="code-block">-- ê°ì‚¬ ê¸°ë¡ (ê° ë§Œë£Œ ê±´ë³„ë¡œ)
INSERT INTO inventory_ledger(
  sku_id, event_type, qty_delta, hold_id, reason, created_at
) VALUES
  ('ìŠ¤ë‹ˆì»¤ì¦ˆID', 'EXPIRE_CREDIT', +1, 'hold_12345', 
   'ë§Œë£Œë¡œ ì¸í•œ ë³µì›', NOW()),
  ('ìš´ë™í™”ID', 'EXPIRE_CREDIT', +2, 'hold_12346', 
   'ë§Œë£Œë¡œ ì¸í•œ ë³µì›', NOW());

-- ì´ë²¤íŠ¸ ë°œì†¡ ì¤€ë¹„
INSERT INTO event_outbox(
  event_type, payload, created_at
) VALUES
  ('ReservationExpired', 
   '{"hold_id":"hold_12345", "sku_id":"ìŠ¤ë‹ˆì»¤ì¦ˆID"}', NOW()),
  ('ReservationExpired', 
   '{"hold_id":"hold_12346", "sku_id":"ìš´ë™í™”ID"}', NOW());

-- 1ì¸ 1ê°œ ì œí•œ í•´ì œ
DELETE FROM user_active_hold 
WHERE hold_id IN ('hold_12345', 'hold_12346', ...);</div>
                    </div>
                    
                    <div class="analogy-section">
                        <div class="section-label">ğŸª ì‹¤ìƒí™œ ë¹„ìœ </div>
                        <p><strong>ê°€ê³„ë¶€ì— "ì˜ˆì•½ ì·¨ì†Œë¡œ ì¸í•œ ì¬ê³  ì¦ê°€" ê¸°ë¡</strong><br>
                        <strong>ì¬ê³  ê´€ë¦¬íŒ€ì— "ì§„ì—´ ìˆ˜ëŸ‰ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”" ì•Œë¦¼</strong></p>
                    </div>
                </div>
            </div>

            <div class="warning">
                <strong>âš ï¸ T3ì˜ ì¥ì•  ì²˜ë¦¬:</strong><br>
                T3ëŠ” ì¤‘ê°„ì— ì‹¤íŒ¨í•  ìˆ˜ ìˆì–´ìš”. ì´ë•Œë¥¼ ëŒ€ë¹„í•œ ì•ˆì „ì¥ì¹˜ë“¤:
                <ul style="margin-top: 10px;">
                    <li><strong>ë©±ë“±ì„± ë³´ì¥:</strong> ì›ì¥ì— UNIQUE ì œì•½ìœ¼ë¡œ ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€</li>
                    <li><strong>ë³´ì • ë°°ì¹˜:</strong> ì£¼ê¸°ì ìœ¼ë¡œ ì¬ê³  ì¼ê´€ì„± í™•ì¸ ë° ìë™ ìˆ˜ì •</li>
                </ul>
            </div>

            <div class="success">
                <strong>ğŸ¯ T3 ì „ì²´ íë¦„ ì •ë¦¬:</strong><br>
                <span class="highlight">SKIP LOCKEDë¡œ T2ì™€ì˜ ì¶©ëŒì„ íšŒí”¼</span>í•˜ë©´ì„œ ë§Œë£Œëœ ì˜ˆì•½ì„ ì•ˆì „í•˜ê²Œ ì •ë¦¬í•˜ê³  ì¬ê³ ë¥¼ ë³µì›í•©ë‹ˆë‹¤.
                <div class="code-block">-- ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ (ì˜ˆ: 10ì´ˆë§ˆë‹¤)
WHILE TRUE DO
  START TRANSACTION;
  
  -- 1) ë§Œë£Œëœ ì˜ˆì•½ ì°¾ê¸° â†’ 2) ìƒíƒœ ë³€ê²½ 
  -- â†’ 3) ì¬ê³  ë³µì› â†’ 4) ê¸°ë¡
  
  COMMIT;
  SLEEP 10;  -- 10ì´ˆ ëŒ€ê¸°
END WHILE;</div>
            </div>
        </div>

        <!-- ìƒí˜¸ì‘ìš© ë° ìš”ì•½ -->
        <div class="summary-section">
            <h2>ğŸ”„ íŠ¸ëœì­ì…˜ ê°„ ìƒí˜¸ì‘ìš©</h2>
            
            <div class="process-flow">
                <div class="flow-step" style="background: linear-gradient(45deg, #28a745, #20c997); flex: 2;">
                    <h3>âœ… ì •ìƒ íë¦„</h3>
                    <p>ì‚¬ìš©ì: êµ¬ë§¤ ë²„íŠ¼ í´ë¦­<br>
                    â†“ T1: ì˜ˆì•½ ìƒì„± (ì¬ê³  100â†’99)<br>
                    â†“ ì‚¬ìš©ì: ê²°ì œ ì§„í–‰<br>
                    â†“ T2: ì£¼ë¬¸ í™•ì • (HOLDâ†’COMMITTED)<br>
                    â†“ ì™„ë£Œ: ìŠ¤ë‹ˆì»¤ì¦ˆ ë°°ì†¡</p>
                </div>
                
                <div class="flow-step" style="background: linear-gradient(45deg, #ffc107, #fd7e14); flex: 2;">
                    <h3>â° ë§Œë£Œ íë¦„</h3>
                    <p>ì‚¬ìš©ì: êµ¬ë§¤ ë²„íŠ¼ í´ë¦­<br>
                    â†“ T1: ì˜ˆì•½ ìƒì„± (ì¬ê³  100â†’99)<br>
                    â†“ ì‚¬ìš©ì: ê²°ì œ ì•ˆ í•¨ (5ë¶„ ê²½ê³¼)<br>
                    â†“ T3: ë§Œë£Œ ì²˜ë¦¬ (ì¬ê³  99â†’100)<br>
                    â†“ ë‹¤ë¥¸ ì‚¬ìš©ì: êµ¬ë§¤ ê°€ëŠ¥</p>
                </div>
            </div>

            <div class="success">
                <h3>ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸ ìš”ì•½</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 15px;">
                    <div>
                        <strong>T1 (ì˜ˆì•½)ì˜ í•µì‹¬</strong>
                        <ul>
                            <li><strong>ì¡°ê±´ë¶€ UPDATE:</strong> available >= qty ì¡°ê±´ìœ¼ë¡œ ì•ˆì „í•œ ì¬ê³  ì°¨ê°</li>
                            <li><strong>ë©±ë“±ì„±:</strong> ê°™ì€ ìš”ì²­ì€ í•œ ë²ˆë§Œ ì²˜ë¦¬</li>
                            <li><strong>ì›ìì„±:</strong> 6ë‹¨ê³„ê°€ ëª¨ë‘ ì„±ê³µí•˜ê±°ë‚˜ ëª¨ë‘ ì‹¤íŒ¨</li>
                        </ul>
                    </div>
                    <div>
                        <strong>T2 (ê²°ì œ)ì˜ í•µì‹¬</strong>
                        <ul>
                            <li><strong>FOR UPDATE:</strong> ë™ì‹œ í™•ì • ë°©ì§€</li>
                            <li><strong>ìœ íš¨ì„± ê²€ì‚¬:</strong> ë§Œë£Œ/ìƒíƒœ í™•ì¸</li>
                            <li><strong>ì›ìì„±:</strong> ì£¼ë¬¸ ìƒì„±ê³¼ ì˜ˆì•½ í™•ì •ì„ í•¨ê»˜</li>
                        </ul>
                    </div>
                    <div>
                        <strong>T3 (ì •ë¦¬)ì˜ í•µì‹¬</strong>
                        <ul>
                            <li><strong>SKIP LOCKED:</strong> T2ì™€ì˜ ì¶©ëŒ íšŒí”¼</li>
                            <li><strong>ë°°ì¹˜ ì²˜ë¦¬:</strong> í•œ ë²ˆì— ì ì •ëŸ‰ë§Œ ì²˜ë¦¬</li>
                            <li><strong>ë©±ë“±ì„±:</strong> ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•´ë„ ì•ˆì „</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning">
                <h3>ğŸ›¡ï¸ ì‹œìŠ¤í…œì˜ í•µì‹¬ ë³´ì¥ì‚¬í•­</h3>
                <ul>
                    <li><strong>ì ˆëŒ€ ì´ˆê³¼ì£¼ë¬¸ ë¶ˆê°€:</strong> ì¡°ê±´ë¶€ UPDATEë¡œ 101ì¼¤ë ˆ íŒë§¤ ë°©ì§€</li>
                    <li><strong>ì‚¬ìš©ì ê²½í—˜ ìš°ìˆ˜:</strong> ë¹ ë¥¸ ì˜ˆì•½ â†’ ì—¬ìœ ìˆëŠ” ê²°ì œ</li>
                    <li><strong>ì¥ì•  ìƒí™© ì•ˆì „:</strong> ë©±ë“±ì„±ê³¼ ë³´ì •ìœ¼ë¡œ ì¼ê´€ì„± ìœ ì§€</li>
                    <li><strong>ê³ ì„±ëŠ¥:</strong> 3ë‹¨ê³„ ë¶„ë¦¬ë¡œ ê°ê°ì˜ ì±…ì„ì´ ëª…í™•</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>